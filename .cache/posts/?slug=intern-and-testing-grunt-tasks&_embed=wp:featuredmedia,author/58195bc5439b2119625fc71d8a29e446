{"value":{"body":"[{\"id\":10981,\"date\":\"2015-09-03T09:55:57\",\"date_gmt\":\"2015-09-03T16:55:57\",\"guid\":{\"rendered\":\"https://www.sitepen.com/blog/?p=10981\"},\"modified\":\"2019-12-11T09:40:25\",\"modified_gmt\":\"2019-12-11T17:40:25\",\"slug\":\"intern-and-testing-grunt-tasks\",\"status\":\"publish\",\"type\":\"post\",\"link\":\"https://wp.sitepen.com/blog/intern-and-testing-grunt-tasks/\",\"title\":{\"rendered\":\"Intern and testing Grunt tasks\"},\"content\":{\"rendered\":\"<p><img loading=\\\"lazy\\\" src=\\\"https://wp.sitepen.com/wp-content/uploads/2013/05/intern_blog1.png\\\" alt=\\\"Intern\\\" width=\\\"196\\\" height=\\\"197\\\" style=\\\"margin:20px 0 15px 15px; float:right;\\\" /></p>\\n<p>You can use <a href=\\\"http://theintern.io/\\\">Intern</a> to test just about everything!  How about testing your <a href=\\\"http://gruntjs.com\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">Grunt</a> tasks?  Even though Intern focuses on tests authored as AMD modules, it certainly can be used to <a href=\\\"https://theintern.github.io/intern/#testing-commonjs-code\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">test CommonJS modules</a>, like those used with Grunt. (As well as TypeScript, ES6 modules, and <a href=\\\"https://theintern.github.io/intern/#testing-global-code\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">non-module code</a>)</p>\\n<p>Why would you want to test your Grunt tasks under Intern?  Well, for all of the advantages that Intern brings, like integrated code coverage analysis, CI integration, etc.  In a lot of cases, your Grunt tasks might be part of a larger project and you can use the same tool to fully test your Grunt tasks.  In addition, you can encapsulate all of your Grunt configuration and execution without having to have a <code>Gruntfile.js</code> as part of your project (or at least have your test configuration separated from your &#8220;real&#8221; <code>Gruntfile.js</code>).  So even if you just want to support Grunt, but not use Grunt for your task orchestration, you can.  This way you can cover all of your code, including your build tooling, in one place.  End-to-end test coverage nirvana!</p>\\n<p><!--more--></p>\\n<p>In order to get started, you would go ahead and develop your Grunt tasks and place them in the traditional place in your package (<code>myPackage/tasks</code>).  There is more on the topic of creating plugins and tasks in the <a href=\\\"http://gruntjs.com/creating-tasks\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">Grunt Documentation</a>.</p>\\n<p>You would also want to add Grunt as a development dependency to your <code>package.json</code> (be nice and don&#8217;t add it as a <code>dependency</code> though, as it only burdens others unnecessarily):</p>\\n<pre class=\\\"brush: plain; title: ; notranslate\\\" title=\\\"\\\">\\r\\n{\\r\\n  &quot;devDependencies&quot;: {\\r\\n    &quot;grunt&quot;: &quot;~0.4.5&quot;\\r\\n  }\\r\\n}\\r\\n</pre>\\n<p>We would then create an Intern module to test our tasks. In the example below, we have developed a task named <code>myTask</code>, which is a single target task.</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">\\r\\ndefine(function (require) {\\r\\n  var registerSuite = require('intern!object');\\r\\n  var assert = require('intern/chai!assert');\\r\\n\\r\\n  /* This will load the Grunt CommonJS module */\\r\\n  var grunt = require('intern/dojo/node!grunt');\\r\\n\\r\\n  /* A helper function that will run our task for us */\\r\\n  function runGruntTask(taskName, callback) {\\r\\n    var task = grunt.task._taskPlusArgs(taskName);\\r\\n    task.task.fn.apply({\\r\\n      nameArgs: task.nameArgs,\\r\\n      name: task.task.name,\\r\\n      args: task.args,\\r\\n      flags: task.flags,\\r\\n      async: function() { return callback; }\\r\\n    }, task.args);\\r\\n  }\\r\\n\\r\\n  registerSuite({\\r\\n    name: 'tasks/myTask',\\r\\n\\r\\n    /* let's setup Grunt for our tests */\\r\\n    setup: function () {\\r\\n      /* we go ahead and configure our tasks for testing */\\r\\n      grunt.initConfig({\\r\\n        myTask: {\\r\\n          options: { foo: 'bar' },\\r\\n          src: 'tests/support/test.js'\\r\\n        }\\r\\n      });\\r\\n\\r\\n      /* now we will tell Grunt to go load our tasks, so now our\\r\\n       * environment should be &quot;production-like&quot; */\\r\\n      grunt.loadTasks('tasks');\\r\\n    },\\r\\n\\r\\n    basic: function () {\\r\\n      /* we will need to deal with a callback from our runGruntTask function */\\r\\n      var dfd = this.async();\\r\\n\\r\\n      /* now we go ahead and run our task */\\r\\n      runGruntTask('myTask', dfd.callback(function () {\\r\\n        /* and then make our assertions here */\\r\\n      }));\\r\\n    }\\r\\n  });\\r\\n});\\r\\n</pre>\\n<p>You can obviously extend this to support all sorts of Grunt task testing, including multi-target tasks. Traditionally these would be considered <i>unit</i> tests and you wouldn&#8217;t expect to run them in a browser environment, just under Node.js.</p>\\n<h2>Learning more</h2>\\n<p>If you&#8217;re interested in learning more about automated testing with Intern, we offer a <a href=\\\"https://www.sitepen.com/workshops/\\\">one-day online Intern workshop</a>, and we also help organizations with their approach to testing under our <a href=\\\"https://www.sitepen.com/services/\\\">expert JavaScript support plans</a>.  If you’re not sure where to start with Intern, or you need some help making your source code more testable, or want assistance in defining a testing strategy for your organization, SitePen can help! <a href=\\\"https://www.sitepen.com/contact/\\\">Contact us</a> for a free 30-minute consultation.</p>\\n\",\"protected\":false},\"excerpt\":{\"rendered\":\"<p>You can use Intern to test just about everything!  How about testing your Grunt tasks?  Even though Intern focuses on tests authored as AMD modules, it certainly can be used to test CommonJS modules, like those used with Grunt. (As well as TypeScript, ES6 modules, and non-module code) Why would you want to test your [&hellip;]</p>\\n\",\"protected\":false},\"author\":67,\"featured_media\":9167,\"comment_status\":\"closed\",\"ping_status\":\"closed\",\"sticky\":false,\"template\":\"\",\"format\":\"standard\",\"meta\":{\"spay_email\":\"\"},\"categories\":[375,333],\"tags\":[404,388,140],\"series\":[],\"jetpack_featured_media_url\":\"\",\"yoast_head\":\"<!-- This site is optimized with the Yoast SEO plugin v14.7 - https://yoast.com/wordpress/plugins/seo/ -->\\n<title>Intern and testing Grunt tasks | SitePen</title>\\n<meta name=\\\"description\\\" content=\\\"You can use Intern to test just about everything!  How about testing your Grunt tasks?  Even though Intern focuses on tests authored as AMD modules, it certainly can be used to test CommonJS modules, like those used with Grunt. (As well as TypeScript, ES6 modules, and non-module code)  Why would you want to test you\\\" />\\n<meta name=\\\"robots\\\" content=\\\"index, follow\\\" />\\n<meta name=\\\"googlebot\\\" content=\\\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\\\" />\\n<meta name=\\\"bingbot\\\" content=\\\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\\\" />\\n<link rel=\\\"canonical\\\" href=\\\"https://www.sitepen.com/blog/intern-and-testing-grunt-tasks/\\\" />\\n<meta property=\\\"og:locale\\\" content=\\\"en_US\\\" />\\n<meta property=\\\"og:type\\\" content=\\\"article\\\" />\\n<meta property=\\\"og:title\\\" content=\\\"Intern and testing Grunt tasks | SitePen\\\" />\\n<meta property=\\\"og:description\\\" content=\\\"You can use Intern to test just about everything!  How about testing your Grunt tasks?  Even though Intern focuses on tests authored as AMD modules, it certainly can be used to test CommonJS modules, like those used with Grunt. (As well as TypeScript, ES6 modules, and non-module code)  Why would you want to test you\\\" />\\n<meta property=\\\"og:url\\\" content=\\\"https://www.sitepen.com/blog/intern-and-testing-grunt-tasks/\\\" />\\n<meta property=\\\"og:site_name\\\" content=\\\"SitePen\\\" />\\n<meta property=\\\"article:publisher\\\" content=\\\"https://www.facebook.com/SitePen\\\" />\\n<meta property=\\\"article:published_time\\\" content=\\\"2015-09-03T16:55:57+00:00\\\" />\\n<meta property=\\\"article:modified_time\\\" content=\\\"2019-12-11T17:40:25+00:00\\\" />\\n<meta property=\\\"og:image\\\" content=\\\"https://wp.sitepen.com/wp-content/uploads/2020/01/og_imageV1.jpg\\\" />\\n\\t<meta property=\\\"og:image:width\\\" content=\\\"1600\\\" />\\n\\t<meta property=\\\"og:image:height\\\" content=\\\"900\\\" />\\n<meta name=\\\"twitter:card\\\" content=\\\"summary_large_image\\\" />\\n<meta name=\\\"twitter:creator\\\" content=\\\"@SitePen\\\" />\\n<meta name=\\\"twitter:site\\\" content=\\\"@SitePen\\\" />\\n<script type=\\\"application/ld+json\\\" class=\\\"yoast-schema-graph\\\">{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@graph\\\":[{\\\"@type\\\":\\\"WebSite\\\",\\\"@id\\\":\\\"https://wp.sitepen.com/#website\\\",\\\"url\\\":\\\"https://wp.sitepen.com/\\\",\\\"name\\\":\\\"SitePen\\\",\\\"description\\\":\\\"Enterprise Web Apps Done Right\\\",\\\"potentialAction\\\":[{\\\"@type\\\":\\\"SearchAction\\\",\\\"target\\\":\\\"https://wp.sitepen.com/?s={search_term_string}\\\",\\\"query-input\\\":\\\"required name=search_term_string\\\"}],\\\"inLanguage\\\":\\\"en-US\\\"},{\\\"@type\\\":\\\"ImageObject\\\",\\\"@id\\\":\\\"https://www.sitepen.com/blog/intern-and-testing-grunt-tasks/#primaryimage\\\",\\\"inLanguage\\\":\\\"en-US\\\",\\\"url\\\":\\\"\\\"},{\\\"@type\\\":\\\"WebPage\\\",\\\"@id\\\":\\\"https://www.sitepen.com/blog/intern-and-testing-grunt-tasks/#webpage\\\",\\\"url\\\":\\\"https://www.sitepen.com/blog/intern-and-testing-grunt-tasks/\\\",\\\"name\\\":\\\"Intern and testing Grunt tasks | SitePen\\\",\\\"isPartOf\\\":{\\\"@id\\\":\\\"https://wp.sitepen.com/#website\\\"},\\\"primaryImageOfPage\\\":{\\\"@id\\\":\\\"https://www.sitepen.com/blog/intern-and-testing-grunt-tasks/#primaryimage\\\"},\\\"datePublished\\\":\\\"2015-09-03T16:55:57+00:00\\\",\\\"dateModified\\\":\\\"2019-12-11T17:40:25+00:00\\\",\\\"author\\\":{\\\"@id\\\":\\\"https://wp.sitepen.com/#/schema/person/13093841ff1b780913b10a245cc737ee\\\"},\\\"description\\\":\\\"You can use Intern to test just about everything! \\\\u00a0How about testing your Grunt tasks? \\\\u00a0Even though Intern focuses on tests authored as AMD modules, it certainly can be used to test CommonJS modules, like those used with Grunt. (As well as TypeScript, ES6 modules, and non-module code) Why would you want to test you\\\",\\\"inLanguage\\\":\\\"en-US\\\",\\\"potentialAction\\\":[{\\\"@type\\\":\\\"ReadAction\\\",\\\"target\\\":[\\\"https://www.sitepen.com/blog/intern-and-testing-grunt-tasks/\\\"]}]},{\\\"@type\\\":[\\\"Person\\\"],\\\"@id\\\":\\\"https://wp.sitepen.com/#/schema/person/13093841ff1b780913b10a245cc737ee\\\",\\\"name\\\":\\\"Kit Kelly\\\",\\\"image\\\":{\\\"@type\\\":\\\"ImageObject\\\",\\\"@id\\\":\\\"https://wp.sitepen.com/#personlogo\\\",\\\"inLanguage\\\":\\\"en-US\\\",\\\"url\\\":\\\"https://secure.gravatar.com/avatar/ea4e125243ac392bb3bbf6bbfb242d86?s=96&d=mm&r=g\\\",\\\"caption\\\":\\\"Kit Kelly\\\"}}]}</script>\\n<!-- / Yoast SEO plugin. -->\",\"_links\":{\"self\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/posts/10981\"}],\"collection\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/posts\"}],\"about\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/types/post\"}],\"author\":[{\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/users/67\"}],\"replies\":[{\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/comments?post=10981\"}],\"version-history\":[{\"count\":1,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/posts/10981/revisions\"}],\"predecessor-version\":[{\"id\":19766,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/posts/10981/revisions/19766\"}],\"wp:featuredmedia\":[{\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/media/9167\"}],\"wp:attachment\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/media?parent=10981\"}],\"wp:term\":[{\"taxonomy\":\"category\",\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/categories?post=10981\"},{\"taxonomy\":\"post_tag\",\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/tags?post=10981\"},{\"taxonomy\":\"series\",\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/series?post=10981\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https://api.w.org/{rel}\",\"templated\":true}]},\"_embedded\":{\"author\":[{\"id\":67,\"name\":\"Kit Kelly\",\"url\":\"\",\"description\":\"\",\"link\":\"https://wp.sitepen.com/blog/author/kkelly/\",\"slug\":\"kkelly\",\"avatar_urls\":{\"24\":\"https://secure.gravatar.com/avatar/ea4e125243ac392bb3bbf6bbfb242d86?s=24&d=mm&r=g\",\"48\":\"https://secure.gravatar.com/avatar/ea4e125243ac392bb3bbf6bbfb242d86?s=48&d=mm&r=g\",\"96\":\"https://secure.gravatar.com/avatar/ea4e125243ac392bb3bbf6bbfb242d86?s=96&d=mm&r=g\"},\"yoast_head\":\"<!-- This site is optimized with the Yoast SEO plugin v14.7 - https://yoast.com/wordpress/plugins/seo/ -->\\n<title>Kit Kelly, Author at SitePen</title>\\n<meta name=\\\"robots\\\" content=\\\"noindex, follow\\\" />\\n<meta property=\\\"og:locale\\\" content=\\\"en_US\\\" />\\n<meta property=\\\"og:type\\\" content=\\\"profile\\\" />\\n<meta property=\\\"og:title\\\" content=\\\"Kit Kelly, Author at SitePen\\\" />\\n<meta property=\\\"og:url\\\" content=\\\"https://www.sitepen.com/blog/author/kkelly/\\\" />\\n<meta property=\\\"og:site_name\\\" content=\\\"SitePen\\\" />\\n<meta property=\\\"og:image\\\" content=\\\"https://secure.gravatar.com/avatar/ea4e125243ac392bb3bbf6bbfb242d86?s=500&#038;d=mm&#038;r=g\\\" />\\n<meta name=\\\"twitter:card\\\" content=\\\"summary_large_image\\\" />\\n<meta name=\\\"twitter:site\\\" content=\\\"@SitePen\\\" />\\n<script type=\\\"application/ld+json\\\" class=\\\"yoast-schema-graph\\\">{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@graph\\\":[{\\\"@type\\\":\\\"WebSite\\\",\\\"@id\\\":\\\"https://wp.sitepen.com/#website\\\",\\\"url\\\":\\\"https://wp.sitepen.com/\\\",\\\"name\\\":\\\"SitePen\\\",\\\"description\\\":\\\"Enterprise Web Apps Done Right\\\",\\\"potentialAction\\\":[{\\\"@type\\\":\\\"SearchAction\\\",\\\"target\\\":\\\"https://wp.sitepen.com/?s={search_term_string}\\\",\\\"query-input\\\":\\\"required name=search_term_string\\\"}],\\\"inLanguage\\\":\\\"en-US\\\"},{\\\"@type\\\":\\\"ProfilePage\\\",\\\"@id\\\":\\\"https://www.sitepen.com/blog/author/kkelly/#webpage\\\",\\\"url\\\":\\\"https://www.sitepen.com/blog/author/kkelly/\\\",\\\"name\\\":\\\"Kit Kelly, Author at SitePen\\\",\\\"isPartOf\\\":{\\\"@id\\\":\\\"https://wp.sitepen.com/#website\\\"},\\\"inLanguage\\\":\\\"en-US\\\"},{\\\"@type\\\":[\\\"Person\\\"],\\\"@id\\\":\\\"https://wp.sitepen.com/#/schema/person/13093841ff1b780913b10a245cc737ee\\\",\\\"name\\\":\\\"Kit Kelly\\\",\\\"image\\\":{\\\"@type\\\":\\\"ImageObject\\\",\\\"@id\\\":\\\"https://wp.sitepen.com/#personlogo\\\",\\\"inLanguage\\\":\\\"en-US\\\",\\\"url\\\":\\\"https://secure.gravatar.com/avatar/ea4e125243ac392bb3bbf6bbfb242d86?s=96&d=mm&r=g\\\",\\\"caption\\\":\\\"Kit Kelly\\\"},\\\"mainEntityOfPage\\\":{\\\"@id\\\":\\\"https://www.sitepen.com/blog/author/kkelly/#webpage\\\"}}]}</script>\\n<!-- / Yoast SEO plugin. -->\",\"_links\":{\"self\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/users/67\"}],\"collection\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/users\"}]}}],\"wp:featuredmedia\":[{\"code\":\"rest_post_invalid_id\",\"message\":\"Invalid post ID.\",\"data\":{\"status\":404}}]}}]","headers":[["access-control-allow-headers","Authorization, X-WP-Nonce, Content-Disposition, Content-MD5, Content-Type"],["access-control-expose-headers","X-WP-Total, X-WP-TotalPages, Link"],["allow","GET"],["cache-control","max-age=2592000"],["connection","close"],["content-type","application/json; charset=UTF-8"],["date","Tue, 25 Aug 2020 13:26:36 GMT"],["expires","Thu, 24 Sep 2020 13:26:36 GMT"],["link","<https://wp.sitepen.com/wp-json/>; rel=\"https://api.w.org/\""],["server","Apache"],["transfer-encoding","chunked"],["vary","Origin"],["x-content-type-options","nosniff"],["x-powered-by","PHP/7.3.21-1+0~20200807.66+debian9~1.gbp18a1c2"],["x-robots-tag","noindex"],["x-wp-total","1"],["x-wp-totalpages","1"]]},"type":"Object"}