{"value":{"body":"[{\"id\":10636,\"date\":\"2015-04-17T12:21:04\",\"date_gmt\":\"2015-04-17T19:21:04\",\"guid\":{\"rendered\":\"https://www.sitepen.com/blog/?p=10636\"},\"modified\":\"2015-04-17T12:21:04\",\"modified_gmt\":\"2015-04-17T19:21:04\",\"slug\":\"dstore-1-1\",\"status\":\"publish\",\"type\":\"post\",\"link\":\"https://wp.sitepen.com/blog/dstore-1-1/\",\"title\":{\"rendered\":\"dstore 1.1 released\"},\"content\":{\"rendered\":\"<p><img src=\\\"https://wp.sitepen.com/wp-content/uploads/2014/10/dstoreLogo.png\\\" alt=\\\"dstore\\\" class=\\\"alignright size-full wp-image-9932\\\" /></p>\\n<p>We have released <a href=\\\"http://dstorejs.io/\\\">dstore</a> version <a href=\\\"https://github.com/SitePen/dstore/releases/tag/v1.1.0\\\">1.1</a>, which features a new set of stores for local DB storage. This feature provides the ability to store data locally in browsers, and use high-performance querying capabilities through the disparate technologies of IndexedDB and WebSQL (and localStorage), through the consistent dstore interface. Complex queries can be formulated in your application, and data can retrieved from local database storage with the same APIs and query format as is currently supported with other stores. Queries can then be automatically translated to SQL or cursor operations, depending on the underlying technology available.</p>\\n<p><!--more--></p>\\n<p>This local data storage functionality was first introduced in Dojo 1.10 as part of the <code>dojox/store</code>, and you can see our original blog post for more information about <a href=\\\"https://www.sitepen.com/blog/2014/06/17/local-database-stores/\\\">local database stores</a>, and specifically for more information on how to configure the <code>LocalDB</code> store. Briefly, we configure the local database storage by defining a database configuration object that specifies which stores will be accessed, and as well as defining the properties on the objects for each store, that will be queried. For example:</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">\\nvar dbConfig = {\\n    version: 2, // we increment this for every update\\n    stores: { // specify the set of stores\\n        product: { // the definition of a store\\n            // the definition of a property on the objects in the store\\n            name: {\\n                // the index preference, indicating\\n                // how unique these values are\\n                preference: 10\\n            },\\n            price: {\\n                preference: 5\\n            }\\n        },\\n...\\n</pre>\\n<p>And once we have a database configuration, we can instantiate individual stores by providing the database configuration and the name of the store. The <code>dstore/LocalDB</code> store is the main store that will automatically load the appropriate implementation, whether it be IndexedDB or WebSQL:</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">\\nrequire(['dstore/LocalDB'], function(LocalDB){\\n    var productStore = new LocalDB({\\n        dbConfig: dbConfig,\\n        storeName: 'product'\\n    });\\n</pre>\\n<p>Now, we can interact with the store using the standard dstore API:</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">\\nproductStore.get(id).then(object){\\n    // get an object by id\\n\\n    // we could make changes and store the object:\\n    productStore.put(updatedObject);\\n});\\nproductStore.add(newObject); // add a new object\\n</pre>\\n<h3>Implementations</h3>\\n<p>The various database implementations are available in <code>dstore/db</code>, can be directly referenced if you do not want to use <code>dstore/LocalDB</code> to auto-select the implementation. These include:</p>\\n<ul>\\n<li><code>dstore/db/IndexedDB</code></li>\\n<li><code>dstore/db/SQL</code></li>\\n<li><code>dstore/db/LocalStorage</code></li>\\n</ul>\\n<h2>Querying</h2>\\n<p>One of the more significant changes in the local database stores as they were migrated from dojox to dstore, is in regards to querying. With the introduction of local database stores in dstore, these stores have adopted the new dstore querying APIs. This provides an important advance, since dstore provides advanced filtering support that can be applied universally across stores. For example, we can do a basic filtering query:</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">\\nvar filteredCollection = store.filter({\\n        inStock: true\\n    });\\n</pre>\\n<p>And then we can fetch or iterate through the returned collection (and again, the filter will be translated to the appropriate SQL or IndexedDB index cursor traversals):</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">\\nfilteredCollection.forEach(function (object) {\\n  // for each item in stock\\n});\\n</pre>\\n<p>With dstore, we chain query commands to further define the query. For example, to sort on <code>price</code>, we could write:</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">\\nvar sortedCollection = filteredCollection.sort('price');\\n</pre>\\n<h2>Advanced Filtering</h2>\\n<p>The advanced filtering support in dstore means that we can use the dstore&#8217;s <code>Filter</code> class to create compound filters, using various filter operations, as the filter to be translated for use with the local database store. For example, we could query for items within a certain price range:</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">\\nvar filteredCollection = store.filter(\\n    new store.Filter().gte('price', 10).lte('price', 20));\\n</pre>\\n<p>And again, this will apply to the IndexedDB and SQL implementations the same as it does to a <code>Memory</code> store. And furthermore, this will utilize the indexed capabilities of the underlying stores to ensure fast, scalable access to the data.</p>\\n<h3><code>contains</code> Operator</h3>\\n<p>Another addition to dstore 1.1 is a new filter operator, <code>contains</code>. This operator is particularly useful in working with IndexedDB&#8217;s <code>multiEntry</code> property functionality, whereby property values can be an array of data, and the <code>contains</code> operator can search for objects where a value needs to match one of the values in the array. For example, we would could search for products with a tag of &#8220;spring&#8221;:</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">\\nvar filteredCollection = store.filter(\\n    new store.Filter().contains('tag', 'spring'));\\n</pre>\\n<p>This can also be combined with filters inside the contains, so you can find objects that contain a match for another filter. However, this comes with a distinct caveat for local database stores. Internet Explorer&#8217;s implementation of IndexedDB does not support <code>multiEntry</code> property definitions, so this will not work in IE. In the future, we are considering an alternate implementation to support querying by array values in IE.</p>\\n<h3><code>select</code> Query</h3>\\n<p>We have also added a new query method, <code>select</code>. The <code>select</code> method gives you the ability to select a certain subset of properties to be included in the objects returned from a query. This naturally maps to the <code>SELECT</code> columns in SQL queries, and can be useful for providing a restricted subset of data in query results, with less memory consumption. For example, we could limit results to just the <code>name</code> and <code>price</code> properties by querying:</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">\\nvar filteredCollection = store\\n    .filter(new store.Filter().lt('price', 20))\\n    .select(['name', 'price']);\\n</pre>\\n<p>We could also specify a single string (rather than array) as the argument to <code>select()</code> to return the specified property values directly as the query results (rather than inside objects):</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">\\nstore\\n    .filter(new store.Filter().lt('price', 20))\\n    .select('price')\\n    .forEach(function(price){\\n  // called with the price value itself, rather than an object\\n});\\n</pre>\\n<h2>Relational Queries</h2>\\n<p>In addition to directly using the <code>select</code> function operator, the <code>in</code> operator can receive a <code>select</code> filtered collection, including collections from other stores. This is a powerful combination, as it permits creating queries based on relationships between different stores. This behaves much like an inner <code>SELECT</code> query in SQL. We can query one store for a certain set of data, and use the select to return a set of primary or foreign keys/ids. That set that can be used as an argument for an <code>in</code> or <code>contains</code> operator to filter by primary or foreign keys/ids in another store. For example, let&#8217;s imagine we had a &#8220;company&#8221; store that held a set of companies that is referenced from the products, and we wanted to find all the products sold by companies with less than 30 employees. We could query by company, and than use the set of ids to query by product:</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">\\nvar productsFromSmallCompanies = productStore.filter(\\n    new productStore.Filter().in('companyId',\\n        companyStore\\n          .filter(new companyStore.Filter().lt('employees', 30))\\n          .select('id')));\\n</pre>\\n<p>This will filter the company store, select the ids, and then use that collection as the possible values for the <code>in</code> filter on <code>companyId</code> in the product store.</p>\\n<h3>Complementary Functionality</h3>\\n<p>The dstore release not only includes new functionality, but also includes a number of fixes, including more consistent and uniform fetch results and total length handling.</p>\\n<p>Again, the new filter and query operators, along with the new relational capabilities are available on all stores, not just the local database stores. And future releases will continue to expand on advanced querying, with normalization across browsers.</p>\\n<p>The combination of local database stores, a new filter operator, and a new query operator, should greatly expand the possibilities and capabilities of dstore. And with the continued refinement and fixes of this release, dstore 1.1 provides an unbeatable data foundation.</p>\\n<h2>Learning more</h2>\\n<p>Visit the <a href=\\\"http://dstorejs.io/\\\">dstore website</a> to read documentation and tutorials for using dstore.</p>\\n<p>Or join us in our <a href=\\\"https://www.sitepen.com/services/\\\">Dojo workshops</a> offered throughout the US, Canada, and Europe, or at your location to learn more about loading data via object stores and dstore. We also provide expert <a href=\\\"https://www.sitepen.com/services/\\\">JavaScript and Dojo support</a> and <a href=\\\"https://www.sitepen.com/services/\\\">development</a> services. <a href=\\\"https://www.sitepen.com/contact/\\\">Contact us</a> for a free 30 minute consultation to discuss how we can help you efficiently manage data within your application.</p>\\n\",\"protected\":false},\"excerpt\":{\"rendered\":\"<p>We have released dstore version 1.1, which features a new set of stores for local DB storage. This feature provides the ability to store data locally in browsers, and use high-performance querying capabilities through the disparate technologies of IndexedDB and WebSQL (and localStorage), through the consistent dstore interface. Complex queries can be formulated in your [&hellip;]</p>\\n\",\"protected\":false},\"author\":28,\"featured_media\":9938,\"comment_status\":\"closed\",\"ping_status\":\"closed\",\"sticky\":false,\"template\":\"\",\"format\":\"standard\",\"meta\":{\"spay_email\":\"\"},\"categories\":[350,45,396],\"tags\":[],\"series\":[],\"jetpack_featured_media_url\":\"\",\"yoast_head\":\"<!-- This site is optimized with the Yoast SEO plugin v14.4.1 - https://yoast.com/wordpress/plugins/seo/ -->\\n<title>dstore 1.1 released | SitePen</title>\\n<meta name=\\\"robots\\\" content=\\\"index, follow\\\" />\\n<meta name=\\\"googlebot\\\" content=\\\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\\\" />\\n<meta name=\\\"bingbot\\\" content=\\\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\\\" />\\n<link rel=\\\"canonical\\\" href=\\\"https://www.sitepen.com/blog/dstore-1-1/\\\" />\\n<meta property=\\\"og:locale\\\" content=\\\"en_US\\\" />\\n<meta property=\\\"og:type\\\" content=\\\"article\\\" />\\n<meta property=\\\"og:title\\\" content=\\\"dstore 1.1 released | SitePen\\\" />\\n<meta property=\\\"og:description\\\" content=\\\"We have released dstore version 1.1, which features a new set of stores for local DB storage. This feature provides the ability to store data locally in browsers, and use high-performance querying capabilities through the disparate technologies of IndexedDB and WebSQL (and localStorage), through the consistent dstore interface. Complex queries can be formulated in your [&hellip;]\\\" />\\n<meta property=\\\"og:url\\\" content=\\\"https://www.sitepen.com/blog/dstore-1-1/\\\" />\\n<meta property=\\\"og:site_name\\\" content=\\\"SitePen\\\" />\\n<meta property=\\\"article:publisher\\\" content=\\\"https://www.facebook.com/SitePen\\\" />\\n<meta property=\\\"article:published_time\\\" content=\\\"2015-04-17T19:21:04+00:00\\\" />\\n<meta property=\\\"og:image\\\" content=\\\"https://wp.sitepen.com/wp-content/uploads/2020/01/og_imageV1.jpg\\\" />\\n\\t<meta property=\\\"og:image:width\\\" content=\\\"1600\\\" />\\n\\t<meta property=\\\"og:image:height\\\" content=\\\"900\\\" />\\n<meta name=\\\"twitter:card\\\" content=\\\"summary_large_image\\\" />\\n<meta name=\\\"twitter:creator\\\" content=\\\"@SitePen\\\" />\\n<meta name=\\\"twitter:site\\\" content=\\\"@SitePen\\\" />\\n<script type=\\\"application/ld+json\\\" class=\\\"yoast-schema-graph\\\">{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@graph\\\":[{\\\"@type\\\":\\\"WebSite\\\",\\\"@id\\\":\\\"https://wp.sitepen.com/#website\\\",\\\"url\\\":\\\"https://wp.sitepen.com/\\\",\\\"name\\\":\\\"SitePen\\\",\\\"description\\\":\\\"Enterprise Web Apps Done Right\\\",\\\"potentialAction\\\":[{\\\"@type\\\":\\\"SearchAction\\\",\\\"target\\\":\\\"https://wp.sitepen.com/?s={search_term_string}\\\",\\\"query-input\\\":\\\"required name=search_term_string\\\"}],\\\"inLanguage\\\":\\\"en-US\\\"},{\\\"@type\\\":\\\"ImageObject\\\",\\\"@id\\\":\\\"https://www.sitepen.com/blog/dstore-1-1/#primaryimage\\\",\\\"inLanguage\\\":\\\"en-US\\\",\\\"url\\\":\\\"\\\"},{\\\"@type\\\":\\\"WebPage\\\",\\\"@id\\\":\\\"https://www.sitepen.com/blog/dstore-1-1/#webpage\\\",\\\"url\\\":\\\"https://www.sitepen.com/blog/dstore-1-1/\\\",\\\"name\\\":\\\"dstore 1.1 released | SitePen\\\",\\\"isPartOf\\\":{\\\"@id\\\":\\\"https://wp.sitepen.com/#website\\\"},\\\"primaryImageOfPage\\\":{\\\"@id\\\":\\\"https://www.sitepen.com/blog/dstore-1-1/#primaryimage\\\"},\\\"datePublished\\\":\\\"2015-04-17T19:21:04+00:00\\\",\\\"dateModified\\\":\\\"2015-04-17T19:21:04+00:00\\\",\\\"author\\\":{\\\"@id\\\":\\\"https://wp.sitepen.com/#/schema/person/0b6eaf72ddf34f8c761763c239c05087\\\"},\\\"inLanguage\\\":\\\"en-US\\\",\\\"potentialAction\\\":[{\\\"@type\\\":\\\"ReadAction\\\",\\\"target\\\":[\\\"https://www.sitepen.com/blog/dstore-1-1/\\\"]}]},{\\\"@type\\\":[\\\"Person\\\"],\\\"@id\\\":\\\"https://wp.sitepen.com/#/schema/person/0b6eaf72ddf34f8c761763c239c05087\\\",\\\"name\\\":\\\"Kris Zyp\\\",\\\"image\\\":{\\\"@type\\\":\\\"ImageObject\\\",\\\"@id\\\":\\\"https://wp.sitepen.com/#personlogo\\\",\\\"inLanguage\\\":\\\"en-US\\\",\\\"url\\\":\\\"https://secure.gravatar.com/avatar/0c073304e94b11bc5a45aa6a3b5fedb7?s=96&d=mm&r=g\\\",\\\"caption\\\":\\\"Kris Zyp\\\"}}]}</script>\\n<!-- / Yoast SEO plugin. -->\",\"_links\":{\"self\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/posts/10636\"}],\"collection\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/posts\"}],\"about\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/types/post\"}],\"author\":[{\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/users/28\"}],\"replies\":[{\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/comments?post=10636\"}],\"version-history\":[{\"count\":0,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/posts/10636/revisions\"}],\"wp:featuredmedia\":[{\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/media/9938\"}],\"wp:attachment\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/media?parent=10636\"}],\"wp:term\":[{\"taxonomy\":\"category\",\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/categories?post=10636\"},{\"taxonomy\":\"post_tag\",\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/tags?post=10636\"},{\"taxonomy\":\"series\",\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/series?post=10636\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https://api.w.org/{rel}\",\"templated\":true}]},\"_embedded\":{\"author\":[{\"id\":28,\"name\":\"Kris Zyp\",\"url\":\"https://www.sitepen.com\",\"description\":\"\",\"link\":\"https://wp.sitepen.com/blog/author/kzyp/\",\"slug\":\"kzyp\",\"avatar_urls\":{\"24\":\"https://secure.gravatar.com/avatar/0c073304e94b11bc5a45aa6a3b5fedb7?s=24&d=mm&r=g\",\"48\":\"https://secure.gravatar.com/avatar/0c073304e94b11bc5a45aa6a3b5fedb7?s=48&d=mm&r=g\",\"96\":\"https://secure.gravatar.com/avatar/0c073304e94b11bc5a45aa6a3b5fedb7?s=96&d=mm&r=g\"},\"yoast_head\":\"<!-- This site is optimized with the Yoast SEO plugin v14.4.1 - https://yoast.com/wordpress/plugins/seo/ -->\\n<title>Kris Zyp, Author at SitePen</title>\\n<meta name=\\\"robots\\\" content=\\\"noindex, follow\\\" />\\n<meta property=\\\"og:locale\\\" content=\\\"en_US\\\" />\\n<meta property=\\\"og:type\\\" content=\\\"profile\\\" />\\n<meta property=\\\"og:title\\\" content=\\\"Kris Zyp, Author at SitePen\\\" />\\n<meta property=\\\"og:url\\\" content=\\\"https://www.sitepen.com/blog/author/kzyp/\\\" />\\n<meta property=\\\"og:site_name\\\" content=\\\"SitePen\\\" />\\n<meta property=\\\"og:image\\\" content=\\\"https://secure.gravatar.com/avatar/0c073304e94b11bc5a45aa6a3b5fedb7?s=500&#038;d=mm&#038;r=g\\\" />\\n<meta name=\\\"twitter:card\\\" content=\\\"summary_large_image\\\" />\\n<meta name=\\\"twitter:site\\\" content=\\\"@SitePen\\\" />\\n<script type=\\\"application/ld+json\\\" class=\\\"yoast-schema-graph\\\">{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@graph\\\":[{\\\"@type\\\":\\\"WebSite\\\",\\\"@id\\\":\\\"https://wp.sitepen.com/#website\\\",\\\"url\\\":\\\"https://wp.sitepen.com/\\\",\\\"name\\\":\\\"SitePen\\\",\\\"description\\\":\\\"Enterprise Web Apps Done Right\\\",\\\"potentialAction\\\":[{\\\"@type\\\":\\\"SearchAction\\\",\\\"target\\\":\\\"https://wp.sitepen.com/?s={search_term_string}\\\",\\\"query-input\\\":\\\"required name=search_term_string\\\"}],\\\"inLanguage\\\":\\\"en-US\\\"},{\\\"@type\\\":\\\"ProfilePage\\\",\\\"@id\\\":\\\"https://www.sitepen.com/blog/author/kzyp/#webpage\\\",\\\"url\\\":\\\"https://www.sitepen.com/blog/author/kzyp/\\\",\\\"name\\\":\\\"Kris Zyp, Author at SitePen\\\",\\\"isPartOf\\\":{\\\"@id\\\":\\\"https://wp.sitepen.com/#website\\\"},\\\"inLanguage\\\":\\\"en-US\\\"},{\\\"@type\\\":[\\\"Person\\\"],\\\"@id\\\":\\\"https://wp.sitepen.com/#/schema/person/0b6eaf72ddf34f8c761763c239c05087\\\",\\\"name\\\":\\\"Kris Zyp\\\",\\\"image\\\":{\\\"@type\\\":\\\"ImageObject\\\",\\\"@id\\\":\\\"https://wp.sitepen.com/#personlogo\\\",\\\"inLanguage\\\":\\\"en-US\\\",\\\"url\\\":\\\"https://secure.gravatar.com/avatar/0c073304e94b11bc5a45aa6a3b5fedb7?s=96&d=mm&r=g\\\",\\\"caption\\\":\\\"Kris Zyp\\\"},\\\"mainEntityOfPage\\\":{\\\"@id\\\":\\\"https://www.sitepen.com/blog/author/kzyp/#webpage\\\"}}]}</script>\\n<!-- / Yoast SEO plugin. -->\",\"_links\":{\"self\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/users/28\"}],\"collection\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/users\"}]}}],\"wp:featuredmedia\":[{\"code\":\"rest_post_invalid_id\",\"message\":\"Invalid post ID.\",\"data\":{\"status\":404}}]}}]","headers":[["access-control-allow-headers","Authorization, Content-Type"],["access-control-expose-headers","X-WP-Total, X-WP-TotalPages"],["allow","GET"],["cf-cache-status","DYNAMIC"],["cf-ray","5a8080e37cd90776-LHR"],["cf-request-id","03842ee22c0000077688396200000001"],["connection","close"],["content-encoding","gzip"],["content-type","application/json; charset=UTF-8"],["date","Tue, 23 Jun 2020 19:09:27 GMT"],["expect-ct","max-age=604800, report-uri=\"https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct\""],["link","<https://wp.sitepen.com/wp-json/>; rel=\"https://api.w.org/\""],["server","cloudflare"],["set-cookie","__cfduid=d0921410764ba14e0238e6b0b18a240251592939366; expires=Thu, 23-Jul-20 19:09:26 GMT; path=/; domain=.sitepen.com; HttpOnly; SameSite=Lax"],["transfer-encoding","chunked"],["vary","Origin"],["x-content-type-options","nosniff"],["x-robots-tag","noindex"],["x-wp-total","1"],["x-wp-totalpages","1"]]},"type":"Object"}