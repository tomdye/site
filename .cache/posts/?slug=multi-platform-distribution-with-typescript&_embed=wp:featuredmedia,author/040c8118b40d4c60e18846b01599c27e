{"value":{"body":"[{\"id\":10755,\"date\":\"2015-06-01T10:47:43\",\"date_gmt\":\"2015-06-01T17:47:43\",\"guid\":{\"rendered\":\"https://www.sitepen.com/blog/?p=10755\"},\"modified\":\"2015-06-01T10:47:43\",\"modified_gmt\":\"2015-06-01T17:47:43\",\"slug\":\"multi-platform-distribution-with-typescript\",\"status\":\"publish\",\"type\":\"post\",\"link\":\"https://wp.sitepen.com/blog/multi-platform-distribution-with-typescript/\",\"title\":{\"rendered\":\"Multi-Platform Distribution with TypeScript\"},\"content\":{\"rendered\":\"<p>Over the past several years, JavaScript has grown to be relevant not only for rich browser applications, but also for server and console applications. Many types of JavaScript libraries can be useful on both ends of this spectrum. <a href=\\\"https://www.sitepen.com/blog/2015/04/16/contributing-to-dojo2/\\\">Dojo 2</a> is no exception, and one of our goals is therefore to make it as easily distributable and consumable across environments as possible.</p>\\n<h2>Module Compilation in TypeScript Today</h2>\\n<p>TypeScript can already help toward this goal by compiling to both the AMD and CommonJS module formats. For example, given the following simple TypeScript module:</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">export function myFunction() {\\n    // ...\\n}\\n</pre>\\n<p><!--more--></p>\\n<p>Compiling this with <code>tsc -m amd</code> produces the following code:</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">define([&quot;require&quot;, &quot;exports&quot;], function (require, exports) {\\n    function myFunction() {\\n        // ...\\n    }\\n    exports.myFunction = myFunction;\\n});\\n</pre>\\n<p>Meanwhile, compiling with <code>tsc -m commonjs</code> looks like this:</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">function myFunction() {\\n    // ...\\n}\\nexports.myFunction = myFunction;\\n</pre>\\n<p>This is all well and good, but as-is it clearly requires maintaining two separate distribution processes &#8211; one for each format. This not only adds complexity to our compilation and release processes; it also throws a significant curveball at IDEs with TypeScript integration.</p>\\n<h2>Making Ends Meet with UMD</h2>\\n<p>A number of modern libraries have adopted the Universal Module Definition (UMD) format as a solution to this problem. This format accommodates both CommonJS and AMD loaders, typically by assigning to <code>module.exports</code> if it exists (for CommonJS), or calling <code>define</code> if it exists and <code>define.amd</code> is defined (for AMD).</p>\\n<p>If you&#8217;ve been following our blog, you know we&#8217;re <a href=\\\"https://www.sitepen.com/blog/2013/12/31/definitive-guide-to-typescript/\\\">pretty passionate about TypeScript</a>, and we&#8217;re not afraid to get our hands dirty and help out where we can. Colin Snover, one of our senior software engineers, discovered an <a href=\\\"https://github.com/Microsoft/TypeScript/issues/2036\\\">open TypeScript issue</a> for adding UMD support, and put together a <a href=\\\"https://github.com/Microsoft/TypeScript/pull/2605\\\">pull request</a>.</p>\\n<p>After some discussion (mostly around the name for the added mode, because naming things is hard), the pull request was merged. This is great news, because it means that in TypeScript 1.5, anyone interested in compiling code to support both AMD and CommonJS environments will be able to use the <code>umd</code> module format.</p>\\n<p>Using the same example from above, running <code>tsc -m umd</code> in TypeScript 1.5 will produce the following:</p>\\n<pre class=\\\"brush: jscript; title: ; notranslate\\\" title=\\\"\\\">(function (deps, factory) {\\n    if (typeof module === 'object' &amp;amp;&amp;amp; typeof module.exports === 'object') {\\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\\n    }\\n    else if (typeof define === 'function' &amp;amp;&amp;amp; define.amd) {\\n        define(deps, factory);\\n    }\\n})([&quot;require&quot;, &quot;exports&quot;], function (require, exports) {\\n    function myFunction() {\\n        // ...\\n    }\\n    exports.myFunction = myFunction;\\n});\\n</pre>\\n<p>Note that while some variants of UMD include a fallback to set a global variable, TypeScript&#8217;s <code>umd</code> support does not include this provision, primarily because of the complexity involved in automatically generating reasonable yet unique global variable names for every module. (Did I mention that naming things is hard?)</p>\\n<h2>Using UMD in TypeScript Now</h2>\\n<p>If you just can&#8217;t wait for TypeScript 1.5, and are willing to live on the edge, Arnav Singh graciously provides periodic releases based on TypeScript&#8217;s master branch in his <a href=\\\"https://github.com/Arnavion/typescript-github\\\">typescript-github</a> repository, and UMD support is in the latest builds. However, it&#8217;s worth noting that TypeScript&#8217;s master branch can have show-stopping bugs sometimes (such as <a href=\\\"https://github.com/Microsoft/TypeScript/pull/3047\\\">this one</a>, recently fixed by our own Bryan Forbes, and fixed in the 2015-05-06 build), so there is some amount of risk involved.</p>\\n<h2>Conclusion</h2>\\n<p>TypeScript is already proving to be a solid choice for robust application development due to its type safety and its <a href=\\\"https://github.com/Microsoft/TypeScript/wiki/What's-new-in-TypeScript\\\">growing list of useful features</a>. Adding UMD support to that list is particularly powerful for authors of libraries intended to be consumable by browsers and servers alike.</p>\\n<h2>Learning More</h2>\\n<p>If your team is new to TypeScript and needs support, we&#8217;re happy to help under our <a href=\\\"https://www.sitepen.com/support\\\">support plans</a>. If you are looking to build an application with TypeScript, and need assistance with architecture or development of features, we&#8217;d love to help. <a href=\\\"https://www.sitepen.com/contact/\\\">Contact us</a> for a free 30 minute consultation to discuss your application.</p>\\n\",\"protected\":false},\"excerpt\":{\"rendered\":\"<p>Over the past several years, JavaScript has grown to be relevant not only for rich browser applications, but also for server and console applications. Many types of JavaScript libraries can be useful on both ends of this spectrum. Dojo 2 is no exception, and one of our goals is therefore to make it as easily [&hellip;]</p>\\n\",\"protected\":false},\"author\":40,\"featured_media\":10789,\"comment_status\":\"open\",\"ping_status\":\"open\",\"sticky\":false,\"template\":\"\",\"format\":\"standard\",\"meta\":{\"spay_email\":\"\"},\"categories\":[353,45,28,11],\"tags\":[244],\"series\":[],\"jetpack_featured_media_url\":\"\",\"yoast_head\":\"<!-- This site is optimized with the Yoast SEO plugin v14.7 - https://yoast.com/wordpress/plugins/seo/ -->\\n<title>Multi-Platform Distribution with TypeScript | SitePen</title>\\n<meta name=\\\"description\\\" content=\\\"Over the past several years, JavaScript has grown to be relevant not only for rich browser applications, but also for server and console applications. Many types of JavaScript libraries can be useful on both ends of this spectrum. Dojo 2 is no exception, and one of our goals is therefore to make it as easily distributable a\\\" />\\n<meta name=\\\"robots\\\" content=\\\"index, follow\\\" />\\n<meta name=\\\"googlebot\\\" content=\\\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\\\" />\\n<meta name=\\\"bingbot\\\" content=\\\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\\\" />\\n<link rel=\\\"canonical\\\" href=\\\"https://www.sitepen.com/blog/multi-platform-distribution-with-typescript/\\\" />\\n<meta property=\\\"og:locale\\\" content=\\\"en_US\\\" />\\n<meta property=\\\"og:type\\\" content=\\\"article\\\" />\\n<meta property=\\\"og:title\\\" content=\\\"Multi-Platform Distribution with TypeScript | SitePen\\\" />\\n<meta property=\\\"og:description\\\" content=\\\"Over the past several years, JavaScript has grown to be relevant not only for rich browser applications, but also for server and console applications. Many types of JavaScript libraries can be useful on both ends of this spectrum. Dojo 2 is no exception, and one of our goals is therefore to make it as easily distributable a\\\" />\\n<meta property=\\\"og:url\\\" content=\\\"https://www.sitepen.com/blog/multi-platform-distribution-with-typescript/\\\" />\\n<meta property=\\\"og:site_name\\\" content=\\\"SitePen\\\" />\\n<meta property=\\\"article:publisher\\\" content=\\\"https://www.facebook.com/SitePen\\\" />\\n<meta property=\\\"article:published_time\\\" content=\\\"2015-06-01T17:47:43+00:00\\\" />\\n<meta property=\\\"og:image\\\" content=\\\"https://wp.sitepen.com/wp-content/uploads/2020/01/og_imageV1.jpg\\\" />\\n\\t<meta property=\\\"og:image:width\\\" content=\\\"1600\\\" />\\n\\t<meta property=\\\"og:image:height\\\" content=\\\"900\\\" />\\n<meta name=\\\"twitter:card\\\" content=\\\"summary_large_image\\\" />\\n<meta name=\\\"twitter:creator\\\" content=\\\"@SitePen\\\" />\\n<meta name=\\\"twitter:site\\\" content=\\\"@SitePen\\\" />\\n<script type=\\\"application/ld+json\\\" class=\\\"yoast-schema-graph\\\">{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@graph\\\":[{\\\"@type\\\":\\\"WebSite\\\",\\\"@id\\\":\\\"https://wp.sitepen.com/#website\\\",\\\"url\\\":\\\"https://wp.sitepen.com/\\\",\\\"name\\\":\\\"SitePen\\\",\\\"description\\\":\\\"Enterprise Web Apps Done Right\\\",\\\"potentialAction\\\":[{\\\"@type\\\":\\\"SearchAction\\\",\\\"target\\\":\\\"https://wp.sitepen.com/?s={search_term_string}\\\",\\\"query-input\\\":\\\"required name=search_term_string\\\"}],\\\"inLanguage\\\":\\\"en-US\\\"},{\\\"@type\\\":\\\"ImageObject\\\",\\\"@id\\\":\\\"https://www.sitepen.com/blog/multi-platform-distribution-with-typescript/#primaryimage\\\",\\\"inLanguage\\\":\\\"en-US\\\",\\\"url\\\":\\\"\\\"},{\\\"@type\\\":\\\"WebPage\\\",\\\"@id\\\":\\\"https://www.sitepen.com/blog/multi-platform-distribution-with-typescript/#webpage\\\",\\\"url\\\":\\\"https://www.sitepen.com/blog/multi-platform-distribution-with-typescript/\\\",\\\"name\\\":\\\"Multi-Platform Distribution with TypeScript | SitePen\\\",\\\"isPartOf\\\":{\\\"@id\\\":\\\"https://wp.sitepen.com/#website\\\"},\\\"primaryImageOfPage\\\":{\\\"@id\\\":\\\"https://www.sitepen.com/blog/multi-platform-distribution-with-typescript/#primaryimage\\\"},\\\"datePublished\\\":\\\"2015-06-01T17:47:43+00:00\\\",\\\"dateModified\\\":\\\"2015-06-01T17:47:43+00:00\\\",\\\"author\\\":{\\\"@id\\\":\\\"https://wp.sitepen.com/#/schema/person/57f7543ce2a7621dd81c29a55b4d513a\\\"},\\\"description\\\":\\\"Over the past several years, JavaScript has grown to be relevant not only for rich browser applications, but also for server and console applications. Many types of JavaScript libraries can be useful on both ends of this spectrum. Dojo 2 is no exception, and one of our goals is therefore to make it as easily distributable a\\\",\\\"inLanguage\\\":\\\"en-US\\\",\\\"potentialAction\\\":[{\\\"@type\\\":\\\"ReadAction\\\",\\\"target\\\":[\\\"https://www.sitepen.com/blog/multi-platform-distribution-with-typescript/\\\"]}]},{\\\"@type\\\":[\\\"Person\\\"],\\\"@id\\\":\\\"https://wp.sitepen.com/#/schema/person/57f7543ce2a7621dd81c29a55b4d513a\\\",\\\"name\\\":\\\"Ken Franqueiro\\\",\\\"image\\\":{\\\"@type\\\":\\\"ImageObject\\\",\\\"@id\\\":\\\"https://wp.sitepen.com/#personlogo\\\",\\\"inLanguage\\\":\\\"en-US\\\",\\\"url\\\":\\\"https://secure.gravatar.com/avatar/94814bc62045f3bc7759c7ac261145f1?s=96&d=mm&r=g\\\",\\\"caption\\\":\\\"Ken Franqueiro\\\"}}]}</script>\\n<!-- / Yoast SEO plugin. -->\",\"_links\":{\"self\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/posts/10755\"}],\"collection\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/posts\"}],\"about\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/types/post\"}],\"author\":[{\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/users/40\"}],\"replies\":[{\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/comments?post=10755\"}],\"version-history\":[{\"count\":0,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/posts/10755/revisions\"}],\"wp:featuredmedia\":[{\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/media/10789\"}],\"wp:attachment\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/media?parent=10755\"}],\"wp:term\":[{\"taxonomy\":\"category\",\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/categories?post=10755\"},{\"taxonomy\":\"post_tag\",\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/tags?post=10755\"},{\"taxonomy\":\"series\",\"embeddable\":true,\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/series?post=10755\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https://api.w.org/{rel}\",\"templated\":true}]},\"_embedded\":{\"author\":[{\"id\":40,\"name\":\"Ken Franqueiro\",\"url\":\"\",\"description\":\"\",\"link\":\"https://wp.sitepen.com/blog/author/kfranqueiro/\",\"slug\":\"kfranqueiro\",\"avatar_urls\":{\"24\":\"https://secure.gravatar.com/avatar/94814bc62045f3bc7759c7ac261145f1?s=24&d=mm&r=g\",\"48\":\"https://secure.gravatar.com/avatar/94814bc62045f3bc7759c7ac261145f1?s=48&d=mm&r=g\",\"96\":\"https://secure.gravatar.com/avatar/94814bc62045f3bc7759c7ac261145f1?s=96&d=mm&r=g\"},\"yoast_head\":\"<!-- This site is optimized with the Yoast SEO plugin v14.7 - https://yoast.com/wordpress/plugins/seo/ -->\\n<title>Ken Franqueiro, Author at SitePen</title>\\n<meta name=\\\"robots\\\" content=\\\"noindex, follow\\\" />\\n<meta property=\\\"og:locale\\\" content=\\\"en_US\\\" />\\n<meta property=\\\"og:type\\\" content=\\\"profile\\\" />\\n<meta property=\\\"og:title\\\" content=\\\"Ken Franqueiro, Author at SitePen\\\" />\\n<meta property=\\\"og:url\\\" content=\\\"https://www.sitepen.com/blog/author/kfranqueiro/\\\" />\\n<meta property=\\\"og:site_name\\\" content=\\\"SitePen\\\" />\\n<meta property=\\\"og:image\\\" content=\\\"https://secure.gravatar.com/avatar/94814bc62045f3bc7759c7ac261145f1?s=500&#038;d=mm&#038;r=g\\\" />\\n<meta name=\\\"twitter:card\\\" content=\\\"summary_large_image\\\" />\\n<meta name=\\\"twitter:site\\\" content=\\\"@SitePen\\\" />\\n<script type=\\\"application/ld+json\\\" class=\\\"yoast-schema-graph\\\">{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@graph\\\":[{\\\"@type\\\":\\\"WebSite\\\",\\\"@id\\\":\\\"https://wp.sitepen.com/#website\\\",\\\"url\\\":\\\"https://wp.sitepen.com/\\\",\\\"name\\\":\\\"SitePen\\\",\\\"description\\\":\\\"Enterprise Web Apps Done Right\\\",\\\"potentialAction\\\":[{\\\"@type\\\":\\\"SearchAction\\\",\\\"target\\\":\\\"https://wp.sitepen.com/?s={search_term_string}\\\",\\\"query-input\\\":\\\"required name=search_term_string\\\"}],\\\"inLanguage\\\":\\\"en-US\\\"},{\\\"@type\\\":\\\"ProfilePage\\\",\\\"@id\\\":\\\"https://www.sitepen.com/blog/author/kfranqueiro/#webpage\\\",\\\"url\\\":\\\"https://www.sitepen.com/blog/author/kfranqueiro/\\\",\\\"name\\\":\\\"Ken Franqueiro, Author at SitePen\\\",\\\"isPartOf\\\":{\\\"@id\\\":\\\"https://wp.sitepen.com/#website\\\"},\\\"inLanguage\\\":\\\"en-US\\\"},{\\\"@type\\\":[\\\"Person\\\"],\\\"@id\\\":\\\"https://wp.sitepen.com/#/schema/person/57f7543ce2a7621dd81c29a55b4d513a\\\",\\\"name\\\":\\\"Ken Franqueiro\\\",\\\"image\\\":{\\\"@type\\\":\\\"ImageObject\\\",\\\"@id\\\":\\\"https://wp.sitepen.com/#personlogo\\\",\\\"inLanguage\\\":\\\"en-US\\\",\\\"url\\\":\\\"https://secure.gravatar.com/avatar/94814bc62045f3bc7759c7ac261145f1?s=96&d=mm&r=g\\\",\\\"caption\\\":\\\"Ken Franqueiro\\\"},\\\"mainEntityOfPage\\\":{\\\"@id\\\":\\\"https://www.sitepen.com/blog/author/kfranqueiro/#webpage\\\"}}]}</script>\\n<!-- / Yoast SEO plugin. -->\",\"_links\":{\"self\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/users/40\"}],\"collection\":[{\"href\":\"https://wp.sitepen.com/wp-json/wp/v2/users\"}]}}],\"wp:featuredmedia\":[{\"code\":\"rest_post_invalid_id\",\"message\":\"Invalid post ID.\",\"data\":{\"status\":404}}]}}]","headers":[["access-control-allow-headers","Authorization, X-WP-Nonce, Content-Disposition, Content-MD5, Content-Type"],["access-control-expose-headers","X-WP-Total, X-WP-TotalPages, Link"],["allow","GET"],["cache-control","max-age=2592000"],["connection","close"],["content-type","application/json; charset=UTF-8"],["date","Tue, 25 Aug 2020 13:13:50 GMT"],["expires","Thu, 24 Sep 2020 13:13:50 GMT"],["link","<https://wp.sitepen.com/wp-json/>; rel=\"https://api.w.org/\""],["server","Apache"],["transfer-encoding","chunked"],["vary","Origin"],["x-content-type-options","nosniff"],["x-powered-by","PHP/7.3.21-1+0~20200807.66+debian9~1.gbp18a1c2"],["x-robots-tag","noindex"],["x-wp-total","1"],["x-wp-totalpages","1"]]},"type":"Object"}